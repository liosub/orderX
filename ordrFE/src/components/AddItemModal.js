import React, { useEffect, useRef, useState } from 'react'
import { Formik, Form, Field, ErrorMessage } from "formik";
import * as Yup from "yup";
import { Button } from "../components";
import { request } from "../utils/Request";

const AddItemModal = ({ onSubmit, onClose }) => {
    const [image, setImage] = useState(null)
    const fileRef = useRef()
    const [additionalFields, setAdditionalFields] = useState([]);

    const handleOnUploadClick = (e) => {
        e.preventDefault()
        fileRef.current.click()
    }

    const getBase64 = (file) => new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onload = function () {
            resolve(reader.result)
        };
        reader.onerror = function (error) {
            reject();
        };
    })

    const handleAddField = (e) => {
        e.preventDefault()
        setAdditionalFields([...additionalFields, { label: '', price: '' }]);
    };

    const handleRemoveField = (index, e) => {
        e.preventDefault()
        const updatedFields = [...additionalFields];
        updatedFields.splice(index, 1);
        setAdditionalFields(updatedFields);
    };

    const validationSchema = Yup.object().shape({
        image: Yup.mixed().required("Please upload an image"),
        title: Yup.string().required("Title is required"),
        description: Yup.string().required("Description is required"),
        price: Yup.number('Please enter a number'),
        additionalFields: Yup.array().of(
            Yup.object().shape({
                label: Yup.string().required("Label is required"),
                price: Yup.number('Please enter a number').required("Price is required"),
            })
        ),
    });


    return (
        <div className="">
            <div className="bg-white p-6 rounded-lg">
                <Formik
                    initialValues={{ image: "", title: "", description: "", price: 0, allergens: "", itemState: 1 }}
                    validationSchema={validationSchema}
                    onSubmit={(values, actions) => {
                        onSubmit({ ...values, image_show: image, additionalFields });
                        actions.setSubmitting(false);
                        actions.resetForm();
                    }}
                >
                    {({ errors, touched, isSubmitting, handleChange, handleBlur, values, setFieldValue }) => (
                        <Form>
                            <div className="bg-white p-8 rounded-lg shadow-md max-w-md mx-auto">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-lg font-semibold">Add item</h2>
                                    <div onClick={(event) => { event.preventDefault(); onClose() }} className="font-bold" style={{ cursor: 'pointer' }}>
                                        x
                                    </div>
                                </div>
                                <div className="mb-50">
                                    <div className='mb-20'>
                                        <div className='flex justify-center w-full'>
                                            {image ? (
                                                <div
                                                    style={{ backgroundImage: `url(${image})`, backgroundPosition: "center", backgroundRepeat: "no-repeat", backgroundSize: "cover", height: 200 }}
                                                    className="has-full-width my-4 flex h-48 has-half-width items-center justify-center"
                                                />
                                            )
                                                :
                                                <div className="my-4 flex h-48 has-half-width items-center justify-center rounded-md border-2 border-dashed border-gray-300" style={{ cursor: 'pointer' }} onClick={handleOnUploadClick}>
                                                    <span className="text-sm font-medium">Add image</span>
                                                </div>
                                            }
                                        </div>
                                        {errors.image && touched.image && (
                                            <div className="v-error">{errors.image}</div>
                                        )}
                                    </div>

                                    <input
                                        ref={fileRef}
                                        type="file"
                                        name="image"
                                        className="d-none"
                                        accept='image/*'
                                        onChange={(event) => {
                                            const ev = event.currentTarget.files;
                                            console.log("ev:", ev)
                                            if (ev) {
                                                if (ev.length === 0) {
                                                    return;
                                                }
                                                const img = document.createElement("img");
                                                img.onload = function () {
                                                    setFieldValue("image", ev[0]);
                                                    getBase64(ev[0]).then(data => {
                                                        setImage(data);
                                                    });
                                                }
                                                img.src = URL.createObjectURL(ev[0])
                                            }
                                        }}
                                    />

                                    <div className='mb-20'>
                                        <input className="stllr-input mb-10"
                                            onChange={handleChange}
                                            onBlur={handleBlur}
                                            name="title"
                                            placeholder="Item title" />
                                        {errors.title && touched.title && (
                                            <div className="v-error">{errors.title}</div>
                                        )}
                                    </div>

                                    <div className='mb-20'>
                                        <input className="stllr-input mb-10"
                                            onChange={handleChange}
                                            onBlur={handleBlur}
                                            name="description"
                                            placeholder="Details" />
                                        {errors.description && touched.description && (
                                            <div className="v-error">{errors.description}</div>
                                        )}
                                    </div>

                                    <div className="flex items-center mb-10">
                                        <input className="stllr-input mr-10"
                                            onChange={handleChange}
                                            onBlur={handleBlur}
                                            type="number"
                                            name="price"
                                            placeholder="Price" />
                                        <Button
                                            className="stllr-btn bordered-primary btn-lg"
                                            text="Additional Price"
                                            onClick={(e) => handleAddField(e)}
                                        />
                                    </div>
                                    {errors.price && touched.price && (
                                        <div className="v-error">{errors.price}</div>
                                    )}
                                </div>
                                <div className="mb-30 flex items-center">
                                    <span className="block text-sm font-medium mr-20">Allergen:</span>
                                    <div className="flex items-center">
                                        <div className='mr-20 flex items-center'>
                                            <input type="radio" name="allergens" onChange={handleChange} value="bread" className='mr-10' />
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M15.3792 14.3958L8.4375 16.875V9.28125L16.3125 7.3125V13.0715C16.3125 13.6658 15.9389 14.1959 15.3792 14.3958Z" fill="#F3AD61" />
                                                <path d="M8.20682 1.83475L1.80127 4.25022L9.5625 10.6875L15.7395 8.54932C16.4192 8.31408 16.875 7.6739 16.875 6.95469V6.44647C16.875 5.27541 16.1493 4.22688 15.0533 3.81431L9.79335 1.83428C9.28198 1.64179 8.71808 1.64195 8.20682 1.83475Z" fill="#E19747" />
                                                <path d="M1.6875 7.59376V13.1936C1.6875 13.8875 2.11218 14.5106 2.75796 14.7643L8.02614 16.8339C8.76414 17.1239 9.5625 16.5798 9.5625 15.7868V10.6875L9.65064 10.5553C9.95996 10.0913 10.125 9.5462 10.125 8.98859C10.125 7.81122 9.39471 6.75738 8.29232 6.344L2.64502 4.22624C1.90955 3.95044 1.125 4.49413 1.125 5.27961V6.06876C1.125 6.51297 1.25648 6.94722 1.50289 7.31684L1.6875 7.59376Z" fill="#FFDEA7" />
                                                <path d="M4.5 7.59375C4.5 7.74906 4.37408 7.875 4.21875 7.875C4.06342 7.875 3.9375 7.74906 3.9375 7.59375C3.9375 7.43844 4.06342 7.3125 4.21875 7.3125C4.37408 7.3125 4.5 7.43844 4.5 7.59375Z" fill="#E19747" />
                                                <path d="M3.375 8.15625C3.375 8.31156 3.24908 8.4375 3.09375 8.4375C2.93842 8.4375 2.8125 8.31156 2.8125 8.15625C2.8125 8.00094 2.93842 7.875 3.09375 7.875C3.24908 7.875 3.375 8.00094 3.375 8.15625Z" fill="#E19747" />
                                                <path d="M4.21875 9.5625C4.37408 9.5625 4.5 9.43656 4.5 9.28125C4.5 9.12594 4.37408 9 4.21875 9C4.06342 9 3.9375 9.12594 3.9375 9.28125C3.9375 9.43656 4.06342 9.5625 4.21875 9.5625Z" fill="#E19747" />
                                                <path d="M3.375 9.84375C3.375 9.99906 3.24908 10.125 3.09375 10.125C2.93842 10.125 2.8125 9.99906 2.8125 9.84375C2.8125 9.68844 2.93842 9.5625 3.09375 9.5625C3.24908 9.5625 3.375 9.68844 3.375 9.84375Z" fill="#E19747" />
                                                <path d="M5.34375 9C5.49908 9 5.625 8.87406 5.625 8.71875C5.625 8.56344 5.49908 8.4375 5.34375 8.4375C5.18842 8.4375 5.0625 8.56344 5.0625 8.71875C5.0625 8.87406 5.18842 9 5.34375 9Z" fill="#E19747" />
                                                <path d="M6.75 8.15625C6.75 8.31156 6.62406 8.4375 6.46875 8.4375C6.31344 8.4375 6.1875 8.31156 6.1875 8.15625C6.1875 8.00094 6.31344 7.875 6.46875 7.875C6.62406 7.875 6.75 8.00094 6.75 8.15625Z" fill="#E19747" />
                                                <path d="M7.59375 10.125C7.74906 10.125 7.875 9.99906 7.875 9.84375C7.875 9.68844 7.74906 9.5625 7.59375 9.5625C7.43844 9.5625 7.3125 9.68844 7.3125 9.84375C7.3125 9.99906 7.43844 10.125 7.59375 10.125Z" fill="#E19747" />
                                                <path d="M6.75 10.4062C6.75 10.5616 6.62406 10.6875 6.46875 10.6875C6.31344 10.6875 6.1875 10.5616 6.1875 10.4062C6.1875 10.2509 6.31344 10.125 6.46875 10.125C6.62406 10.125 6.75 10.2509 6.75 10.4062Z" fill="#E19747" />
                                                <path d="M5.34375 11.25C5.49908 11.25 5.625 11.1241 5.625 10.9688C5.625 10.8134 5.49908 10.6875 5.34375 10.6875C5.18842 10.6875 5.0625 10.8134 5.0625 10.9688C5.0625 11.1241 5.18842 11.25 5.34375 11.25Z" fill="#E19747" />
                                                <path d="M4.5 11.5312C4.5 11.6866 4.37408 11.8125 4.21875 11.8125C4.06342 11.8125 3.9375 11.6866 3.9375 11.5312C3.9375 11.3759 4.06342 11.25 4.21875 11.25C4.37408 11.25 4.5 11.3759 4.5 11.5312Z" fill="#E19747" />
                                                <path d="M3.09375 12.375C3.24908 12.375 3.375 12.2491 3.375 12.0938C3.375 11.9384 3.24908 11.8125 3.09375 11.8125C2.93842 11.8125 2.8125 11.9384 2.8125 12.0938C2.8125 12.2491 2.93842 12.375 3.09375 12.375Z" fill="#E19747" />
                                                <path d="M5.625 13.2188C5.625 13.3741 5.49908 13.5 5.34375 13.5C5.18842 13.5 5.0625 13.3741 5.0625 13.2188C5.0625 13.0634 5.18842 12.9375 5.34375 12.9375C5.49908 12.9375 5.625 13.0634 5.625 13.2188Z" fill="#E19747" />
                                                <path d="M6.46875 12.9375C6.62406 12.9375 6.75 12.8116 6.75 12.6562C6.75 12.5009 6.62406 12.375 6.46875 12.375C6.31344 12.375 6.1875 12.5009 6.1875 12.6562C6.1875 12.8116 6.31344 12.9375 6.46875 12.9375Z" fill="#E19747" />
                                                <path d="M7.875 12.0938C7.875 12.2491 7.74906 12.375 7.59375 12.375C7.43844 12.375 7.3125 12.2491 7.3125 12.0938C7.3125 11.9384 7.43844 11.8125 7.59375 11.8125C7.74906 11.8125 7.875 11.9384 7.875 12.0938Z" fill="#E19747" />
                                                <path d="M7.59375 14.0625C7.74906 14.0625 7.875 13.9366 7.875 13.7812C7.875 13.6259 7.74906 13.5 7.59375 13.5C7.43844 13.5 7.3125 13.6259 7.3125 13.7812C7.3125 13.9366 7.43844 14.0625 7.59375 14.0625Z" fill="#E19747" />
                                            </svg>
                                        </div>


                                        <div className='mr-20 flex items-center'>
                                            <input type="radio" name="allergens" onChange={handleChange} value="milk" className='mr-10' />
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M2.25534 1.72452L4.38165 16.4212C4.42134 16.6789 4.64248 16.875 4.90898 16.875H13.091C13.3575 16.875 13.5843 16.6845 13.6184 16.4212L15.7447 1.72452C15.7901 1.41075 15.5405 1.125 15.2173 1.125H2.78267C2.45946 1.125 2.20998 1.41075 2.25534 1.72452Z" fill="#AEDDFF" />
                                                <path d="M3.66187 5.22818L5.04619 14.885C5.0687 15.0587 5.22063 15.1875 5.39508 15.1875H12.5981C12.7725 15.1875 12.9244 15.0587 12.9469 14.885L14.3369 5.22818C14.3932 4.84168 14.095 4.5 13.701 4.5H4.29775C3.90947 4.5 3.61122 4.84729 3.66187 5.22818Z" fill="#F3EEF8" />
                                                <path d="M13.9813 2.93352C14.0254 2.62601 13.8118 2.34098 13.5043 2.2969C13.1968 2.25282 12.9118 2.46639 12.8677 2.7739L11.0884 15.1875H12.2249L13.9813 2.93352Z" fill="white" />
                                            </svg>
                                        </div>


                                        <div className='mr-20 flex items-center'>
                                            <input type="radio" name="allergens" onChange={handleChange} value="egg" className='mr-10' />
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M9.1863 1.125C7.74068 1.125 6.38505 1.845 5.57503 3.0375L5.50191 3.14438C3.88753 5.52375 3.15628 8.3925 3.43191 11.25L3.47691 11.7C3.75816 14.6306 6.22193 16.8637 9.1638 16.8637C12.1169 16.8637 14.5807 14.6194 14.8507 11.6775L14.9013 11.1544C15.1713 8.27437 14.4176 5.38875 12.7751 3.00937C11.9594 1.83375 10.6207 1.125 9.1863 1.125Z" fill="#F3AD61" />
                                            </svg>
                                        </div>


                                        <div className='mr-20 flex items-center'>
                                            <input type="radio" name="allergens" onChange={handleChange} value="peanuts" className='mr-10' />
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M4.39468 16.7263C3.62378 16.543 2.76063 15.9831 2.41801 15.666C1.90407 15.1111 1.2913 14.1002 1.15294 12.7526C1.01457 11.4049 1.4099 10.7707 1.90408 9.81939C2.39824 8.86804 3.77046 7.92259 5.02973 7.85458C6.28088 7.78697 6.70033 7.52355 7.16546 7.01932C7.65731 6.48619 7.79979 5.88291 7.87888 4.97124C7.95791 4.05956 8.46023 2.93754 9.46958 2.12789C10.3591 1.41441 11.6533 0.810518 13.5904 1.30599C15.5275 1.80147 16.314 3.31873 16.6303 4.15113C16.9466 4.98352 17.0962 6.57287 16.187 8.09893C15.2777 9.62499 13.7751 10.1252 12.846 10.1648C11.917 10.2044 11.2142 10.6121 10.7793 11.1274C10.3444 11.6427 10.2654 12.0589 10.1863 12.9706C10.1073 13.8823 9.66251 15.0218 8.35791 16.0326C7.0533 17.0434 5.36571 16.9572 4.39468 16.7263Z" fill="#F3AD61" />
                                                <path d="M12.1344 1.30072C12.2494 1.38344 12.3544 1.46867 12.3244 1.52883C12.2944 1.58899 12.1719 1.65667 11.9544 1.72435C11.7369 1.79203 11.3019 1.98754 11.1494 2.08279C10.9969 2.17804 10.7744 2.24071 10.6644 2.15047C10.6103 2.1061 10.5568 2.05568 10.5102 2.0117C10.462 1.96624 10.4211 1.92767 10.3944 1.90984C10.3419 1.87474 10.3194 1.82461 10.3944 1.75192C10.4694 1.67922 10.9244 1.43608 11.0719 1.3684C11.2194 1.30073 11.5969 1.18542 11.7544 1.1779C11.9119 1.17038 12.0194 1.21801 12.1344 1.30072Z" fill="#D3883E" />
                                                <path d="M14.1309 3.10903C13.9629 2.97526 13.7672 2.92967 13.6367 3.06444C13.444 3.24942 13.0388 3.64415 12.9597 3.74324C12.8609 3.86711 12.7472 4.04548 12.8955 4.19413C13.044 4.34302 13.622 4.92253 13.7701 5.07607C13.9184 5.22967 14.1111 5.20489 14.2199 5.10084C14.3286 4.9968 14.803 4.53105 14.9018 4.41214L14.9128 4.39898C15.01 4.28263 15.1274 4.1421 14.9512 3.94639C14.805 3.78387 14.3434 3.32044 14.1309 3.10903Z" fill="#D3883E" />
                                                <path d="M16.4866 5.93819C16.5187 5.82918 16.6398 5.89358 16.7115 5.97289C16.7674 6.02346 16.8301 6.13883 16.798 6.32468C16.7658 6.51048 16.6991 6.76068 16.6102 6.98613C16.5212 7.21158 16.289 7.64757 16.2618 7.69465C16.2346 7.74173 16.1951 7.76153 16.1358 7.7194C16.0883 7.68571 16.0056 7.58316 15.9702 7.53608C15.8764 7.42707 15.9109 7.29578 15.9504 7.23138C15.9697 7.20004 16.0123 7.10886 16.0619 7.00294C16.1141 6.89123 16.174 6.76304 16.2222 6.67152C16.3161 6.49309 16.4545 6.0472 16.4866 5.93819Z" fill="#D3883E" />
                                                <path d="M13.5306 6.94507C13.3754 6.80754 13.2094 6.72795 13.0109 6.87993C12.9074 6.95925 12.8293 7.02281 12.7599 7.07934C12.6963 7.13109 12.64 7.17699 12.5779 7.22368C12.5125 7.2729 12.425 7.33038 12.342 7.385C12.2601 7.43883 12.1823 7.48996 12.1339 7.52765C12.0365 7.60365 11.9318 7.76289 12.0329 7.88231C12.1339 8.00167 12.6609 8.52277 12.7655 8.59516C12.8702 8.6675 13.0868 8.81589 13.3646 8.61688C13.4102 8.58425 13.4598 8.54898 13.5114 8.51236C13.7746 8.32533 14.0898 8.10151 14.1803 8.00167C14.2885 7.88231 14.3716 7.74478 14.22 7.60725C14.0684 7.46977 13.6967 7.10791 13.5306 6.94507Z" fill="#D3883E" />
                                                <path d="M9.92507 3.85224C10.1029 3.66396 10.2413 3.77792 10.3945 3.94638C10.516 4.08336 10.7248 4.29049 10.8958 4.46001C10.9475 4.51124 10.9956 4.55902 11.0369 4.60041C11.2148 4.77878 11.032 5.04138 10.9084 5.1702C10.7849 5.29903 10.5032 5.73007 10.35 5.96795C10.2104 6.18468 10.0708 6.06391 9.9573 5.96581C9.94639 5.95636 9.93548 5.94691 9.92507 5.93819C9.86235 5.88582 9.73343 5.74627 9.60102 5.60292C9.48283 5.47501 9.36184 5.34406 9.28264 5.2693C9.11462 5.11075 9.19365 4.84814 9.28264 4.69455C9.37157 4.54095 9.74715 4.04052 9.92507 3.85224Z" fill="#D3883E" />
                                                <path d="M4.96834 10.6841C5.12353 10.8217 5.28954 10.9013 5.48804 10.7493C5.5916 10.67 5.6696 10.6064 5.73901 10.55C5.80246 10.4983 5.85911 10.4522 5.92115 10.4055C5.98657 10.3563 6.07398 10.2988 6.15706 10.2442C6.23896 10.1904 6.31664 10.1393 6.36502 10.1015C6.4625 10.0256 6.56713 9.86637 6.4661 9.74695C6.36502 9.62753 5.83813 9.10643 5.73344 9.03409C5.62882 8.9617 5.41225 8.81337 5.13435 9.01238C5.08881 9.045 5.0392 9.08022 4.98759 9.11689C4.72431 9.30387 4.40924 9.52769 4.31871 9.62753C4.21044 9.74695 4.12743 9.88442 4.27901 10.022C4.43059 10.1594 4.80232 10.5213 4.96834 10.6841Z" fill="#D3883E" />
                                                <path d="M1.57788 11.8037C1.54575 11.9127 1.42468 11.8483 1.35303 11.7691C1.29715 11.7184 1.23442 11.6031 1.26655 11.4173C1.29867 11.2315 1.36538 10.9812 1.45433 10.7558C1.54328 10.5304 1.77554 10.0943 1.80272 10.0473C1.8299 10.0002 1.86943 9.98038 1.92873 10.0225C1.97617 10.0562 2.05886 10.1587 2.09428 10.2058C2.18817 10.3148 2.15358 10.4461 2.11405 10.5105C2.09481 10.5419 2.05218 10.633 2.00265 10.739C1.95039 10.8507 1.89046 10.9789 1.84225 11.0704C1.74836 11.2488 1.60999 11.6947 1.57788 11.8037Z" fill="#D3883E" />
                                                <path d="M4.10309 14.7048C4.2711 14.8385 4.4668 14.8841 4.59725 14.7494C4.78998 14.5644 5.1952 14.1697 5.27427 14.0706C5.3731 13.9467 5.48676 13.7683 5.33851 13.6197C5.19026 13.471 4.61208 12.8913 4.46383 12.7377C4.31558 12.5841 4.12286 12.6089 4.01414 12.713C3.90542 12.817 3.43102 13.2828 3.33219 13.4017L3.32122 13.4148C3.22402 13.5312 3.10662 13.6717 3.28277 13.8674C3.42904 14.0299 3.8906 14.4934 4.10309 14.7048Z" fill="#D3883E" />
                                                <path d="M6.18299 16.6386C6.06801 16.5558 5.96299 16.4706 5.99297 16.4105C6.02301 16.3503 6.14547 16.2826 6.36299 16.215C6.5805 16.1473 7.01549 15.9518 7.16798 15.8565C7.32047 15.7613 7.543 15.6986 7.65297 15.7888C7.70708 15.8332 7.76057 15.8837 7.8072 15.9276C7.85541 15.9731 7.8963 16.0116 7.92297 16.0295C7.9755 16.0646 7.998 16.1147 7.92297 16.1874C7.84799 16.2601 7.39298 16.5033 7.24549 16.5709C7.098 16.6386 6.72051 16.7539 6.56301 16.7614C6.40551 16.7689 6.29796 16.7213 6.18299 16.6386Z" fill="#D3883E" />
                                                <path d="M8.36806 13.7435C8.19014 13.9318 8.05176 13.8179 7.8986 13.6494C7.77715 13.5124 7.56835 13.3054 7.39741 13.1358C7.34577 13.0846 7.29745 13.0367 7.25616 12.9954C7.0783 12.817 7.26111 12.5544 7.38464 12.4256C7.50822 12.2967 7.78986 11.8656 7.94309 11.6278C8.0827 11.411 8.22231 11.5319 8.33577 11.63C8.34679 11.6395 8.35754 11.6488 8.36806 11.6576C8.43072 11.7099 8.55964 11.8495 8.69211 11.9928C8.81024 12.1207 8.93123 12.2517 9.01049 12.3264C9.17851 12.485 9.09942 12.7476 9.01049 12.9012C8.9215 13.0548 8.54598 13.5552 8.36806 13.7435Z" fill="#D3883E" />
                                                <path d="M8.8274 9.89865C9.00037 10.0622 9.23263 10.0968 9.36605 9.96305C9.49959 9.82918 10.0233 9.30403 10.1271 9.20497C10.2308 9.10586 10.3791 8.87799 10.2012 8.68966C10.1622 8.64838 10.1106 8.5928 10.052 8.52974C9.8435 8.30514 9.54662 7.98541 9.41544 7.87708C9.24742 7.73836 9.03992 7.68386 8.89659 7.82263C8.75327 7.96134 8.25416 8.45679 8.13559 8.59061C8.01695 8.72437 7.86379 8.91759 8.06145 9.12571C8.21754 9.29002 8.47837 9.55023 8.68093 9.75239C8.73493 9.80623 8.78477 9.85595 8.8274 9.89865Z" fill="#D3883E" />
                                            </svg>
                                        </div>

                                        <div className='mr-20 flex items-center'>
                                            <input type="radio" name="allergens" onChange={handleChange} value="crab" className='mr-10' />
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path d="M7.0424 3.645H6.80615V2.8125H7.8749C7.8749 3.27375 7.50365 3.645 7.0424 3.645Z" fill="#CA0B4A" />
                                                <path d="M7.0424 3.83066H6.80615V4.66316H7.8749C7.8749 4.20191 7.50365 3.83066 7.0424 3.83066Z" fill="#CA0B4A" />
                                                <path d="M10.9575 3.645H11.25V2.8125H10.125C10.125 3.27375 10.4962 3.645 10.9575 3.645Z" fill="#CA0B4A" />
                                                <path d="M10.9575 3.83066H11.25V4.66316H10.125C10.125 4.20191 10.4962 3.83066 10.9575 3.83066Z" fill="#CA0B4A" />
                                                <path d="M4.28478 7.16558C4.45498 7.07176 4.57027 6.89063 4.57027 6.68251C4.57027 6.37808 4.32347 6.13126 4.01902 6.13126C3.71458 6.13126 3.46777 6.37808 3.46777 6.68251C3.46777 6.8881 3.58032 7.06742 3.74717 7.16221C3.61366 7.24928 3.5254 7.39992 3.5254 7.57126C3.5254 8.70813 4.44815 9.62298 5.57715 9.62298C5.84669 9.62298 6.06516 9.4045 6.06516 9.13501C6.06516 8.86546 5.84669 8.64698 5.57715 8.64698C4.98489 8.64698 4.5014 8.16683 4.5014 7.57126C4.5014 7.40217 4.41541 7.25316 4.28478 7.16558Z" fill="#CA0B4A" />
                                                <path d="M13.7559 11.0587C13.3959 11.0756 13.2047 10.6481 13.4578 10.395L15.8934 7.95937C16.1466 7.70624 16.5741 7.90312 16.5572 8.25749C16.5291 8.96624 16.2422 9.66374 15.7022 10.2037C15.1622 10.7437 14.4647 11.0306 13.7559 11.0587Z" fill="#CA0B4A" />
                                                <path d="M13.0474 11.4299C12.6874 11.4299 12.5243 11.8687 12.7887 12.1106C13.3118 12.5887 14.0093 12.8812 14.7687 12.8812C15.5337 12.8812 16.2312 12.5887 16.7487 12.1106C17.013 11.8687 16.8443 11.4299 16.4899 11.4299H13.0474Z" fill="#CA0B4A" />
                                                <path d="M11.4804 13.0754C11.4092 12.8426 11.5804 12.5719 11.8605 12.5719C12.5693 12.5775 13.278 12.8363 13.8349 13.3594C14.3918 13.8825 14.7068 14.5688 14.763 15.2719C14.7911 15.6263 14.3693 15.8344 14.1105 15.5925L11.591 13.2473C11.8341 13.6553 11.9824 14.1271 12.0011 14.6363C12.0293 15.4013 11.7649 16.1044 11.3036 16.6444C11.073 16.9144 10.6286 16.7681 10.6174 16.4081L10.488 12.9713C10.4768 12.6169 10.9043 12.4313 11.1574 12.6844C11.2755 12.8052 11.3837 12.936 11.4804 13.0754Z" fill="#CA0B4A" />
                                                <path d="M5.17794 12.1444C5.43669 11.9025 5.27356 11.4694 4.91919 11.4694H1.51044C1.15606 11.4694 0.992938 11.9025 1.25169 12.1444C1.76919 12.6169 2.45544 12.9094 3.21481 12.9094C3.96856 12.9094 4.66044 12.6169 5.17794 12.1444Z" fill="#CA0B4A" />
                                                <path d="M4.21625 11.0981C4.57063 11.115 4.76188 10.6931 4.50875 10.44L2.09563 8.02127C1.8425 7.77377 1.42063 7.96502 1.4375 8.31939C1.46563 9.02252 1.7525 9.71439 2.28688 10.2488C2.82125 10.7831 3.51313 11.07 4.21625 11.0981Z" fill="#CA0B4A" />
                                                <path d="M6.0891 12.5944C6.44347 12.5944 6.61785 13.0219 6.3591 13.2637L3.86161 15.5925C3.60286 15.8287 3.18661 15.6262 3.21473 15.2719C3.27098 14.5687 3.57473 13.8881 4.13161 13.3706C4.68286 12.8587 5.38598 12.6 6.0891 12.5944Z" fill="#CA0B4A" />
                                                <path d="M6.83749 12.7519C7.09061 12.4988 7.51811 12.6844 7.50686 13.0388L7.37749 16.4756C7.36624 16.8356 6.92186 16.9819 6.69124 16.7119C6.22999 16.1719 5.96561 15.4688 5.99374 14.7038C6.02186 13.9388 6.34249 13.2581 6.83749 12.7519Z" fill="#CA0B4A" />
                                                <path d="M14.3845 7.57126C14.3845 7.40104 14.2973 7.25119 14.1653 7.16389C14.3338 7.06956 14.4477 6.88934 14.4477 6.68251C14.4477 6.37808 14.2009 6.13126 13.8964 6.13126C13.592 6.13126 13.3452 6.37808 13.3452 6.68251C13.3452 6.88934 13.4591 7.06956 13.6276 7.16389C13.4956 7.25125 13.4085 7.40104 13.4085 7.57126C13.4085 8.16683 12.925 8.64698 12.3327 8.64698C12.0632 8.64698 11.8447 8.86546 11.8447 9.13501C11.8447 9.4045 12.0632 9.62298 12.3327 9.62298C13.4617 9.62298 14.3845 8.70813 14.3845 7.57126Z" fill="#CA0B4A" />
                                                <path d="M7.3125 7.875C7.62317 7.875 7.875 7.62317 7.875 7.3125C7.875 7.00183 7.62317 6.75 7.3125 6.75C7.00183 6.75 6.75 7.00183 6.75 7.3125C6.75 7.62317 7.00183 7.875 7.3125 7.875Z" fill="#533566" />
                                                <path d="M10.6875 7.875C10.9982 7.875 11.25 7.62317 11.25 7.3125C11.25 7.00183 10.9982 6.75 10.6875 6.75C10.3768 6.75 10.125 7.00183 10.125 7.3125C10.125 7.62317 10.3768 7.875 10.6875 7.875Z" fill="#533566" />
                                                <path d="M4.67761 6.46875H3.375C3.375 4.45055 5.00745 2.8125 7.03125 2.8125V4.1207C7.03125 5.41772 5.97465 6.46875 4.67761 6.46875Z" fill="#F8312F" />
                                                <path d="M13.3224 6.46875H14.625C14.625 4.45055 12.9926 2.8125 10.9688 2.8125V4.1207C10.9688 5.41772 12.0254 6.46875 13.3224 6.46875Z" fill="#F8312F" />
                                                <path d="M9 15.1875C11.7959 15.1875 14.0625 12.9932 14.0625 10.2865C14.0625 7.57423 11.7959 7.3125 9 7.3125C6.20409 7.3125 3.9375 7.5798 3.9375 10.2865C3.9375 12.9932 6.20409 15.1875 9 15.1875Z" fill="#F8312F" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>

                                {additionalFields.map((field, index) => (
                                    <div key={index} className="flex items-center mb-20">
                                        <input
                                            className="stllr-input mr-10"
                                            type="text"
                                            name={`additionalLabels[${index}]`}
                                            value={field.label}
                                            onChange={(e) => {
                                                const updatedFields = [...additionalFields];
                                                updatedFields[index].label = e.target.value;
                                                setAdditionalFields(updatedFields);
                                            }}
                                            placeholder="Label"
                                        />
                                        <input
                                            className="stllr-input mr-10"
                                            type="number"
                                            name={`additionalPrices[${index}]`}
                                            value={field.price}
                                            onChange={(e) => {
                                                const updatedFields = [...additionalFields];
                                                updatedFields[index].price = e.target.value;
                                                setAdditionalFields(updatedFields);
                                            }}
                                            placeholder="Price"
                                        />
                                        <div onClick={(e) => handleRemoveField(index, e)} className="font-bold" style={{ cursor: 'pointer' }}>
                                            x
                                        </div>
                                        {errors.additionalFields && errors.additionalFields.length > 0 && (
                                            <div className="v-error">
                                                {errors.additionalFields.map((error, index) => (
                                                    <div key={index}>{error.label}: {error.price}</div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                ))}

                                <div className='flex justify-center'>
                                    <Button
                                        className="stllr-btn btn-lg pink w-3-quarters mb-15 rounded-full"
                                        text="Save item"
                                        type="submit"
                                    />
                                </div>
                            </div>
                        </Form>
                    )}
                </Formik>
            </div>
        </div>
    );
};

export default AddItemModal;